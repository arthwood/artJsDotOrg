var Sidebar=ArtJs.Class(function(){this.onLeaf=new ArtJs.CustomEvent("onLeaf"),this._onNodeDelegate=$D(this,this._onNode),this._onLeafDelegate=$D(this,this._onLeaf),this._leafClassToggler=new ArtJs.ClassToggler("selected");var a=$(".sidebar li").partition(function(a,b){return a.find("ul").isNotEmpty()});this.nodes=a.x,this.leaves=a.y,this.nodes.each($DC(this,this._eachNode)),this.leaves.each($DC(this,this._eachLeaf))},{init:function(){this._expandNode(this.nodes.first().firstElement()),this._leafAction(this.leaves.first().firstElement())},_eachNode:function(a){a.firstElement().onClick(this._onNodeDelegate),a.find("ul").first().hide(),a.style.listStyleImage=this.ctor.FOLDED},_onNode:function(a,b){a.preventDefault(),this._expandNode(b.element)},_expandNode:function(a){var b=a.next();b.toggle(),a.parent().style.listStyleImage=b.isHidden()?this.ctor.FOLDED:this.ctor.UNFOLDED},_eachLeaf:function(a){a.firstElement().onClick(this._onLeafDelegate),a.style.listStyleImage=this.ctor.LEAF},_onLeaf:function(a,b){a.preventDefault(),this._leafAction(b.element)},_leafAction:function(a){this._leafClassToggler.toggle(a),this.onLeaf.fire(a)}},{FOLDED:"url(../images/plus.png)",UNFOLDED:"url(../images/minus.png)",LEAF:"url(../images/leaf.png)"}),Content=ArtJs.Class(function(){this._element=$(".art-content").first(),this._onContentSuccessD=$D(this,this._onContentSuccess),this._onAnchorDelegate=$D(this,this._onAnchor)},{loadSection:function(a){this._load("com/arthwood/"+a.getAttributes().href)},_load:function(a){$get(a,null,this._onContentSuccessD)},_onContentSuccess:function(a){var b=a.getResponseText();this._element.setContent(b);var c=this._element.lastElement();c&&(c.style.marginBottom="0"),this._initializeLinks()},_initializeLinks:function(){var a=this._element.find("ul.members");a.isEmpty()||a.each(this._eachMember,this)},_eachMember:function(a){var b=a.find("li"),c=b.last();c.style.borderBottom="none",b.each(this._initAnchors,this)},_initAnchors:function(a){var b=a.first("h4 a");b.onClick(this._onAnchorDelegate);var c=a.first(".more");c&&c.blindTo(0,0)},_onAnchor:function(a){a.preventDefault();var b=a.currentTarget,c=b.parent().parent().first(".more");c&&c.blindToggle(300)}}),Main=ArtJs.Class(function(){this.sidebar=new Sidebar,this.content=new Content,this.sidebar.onLeaf.add($D(this,this.onLeaf)),this.sidebar.init()},{onLeaf:function(a){this.content.loadSection(a)}});ArtJs.globalize(),ArtJs.doInjection(),ArtJs.onDocumentLoad.add($D(null,function(){this.main=new Main}))