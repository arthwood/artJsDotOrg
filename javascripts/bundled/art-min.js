function spec(a,b,c){return artjs.SpecApi.register(artjs.Specify,a,b,c)}function describe(a,b,c){return artjs.SpecApi.register(artjs.Describe,a,b,c)}function context(a,b,c){return artjs.SpecApi.register(artjs.Context,a,b,c)}function it(a,b,c){return artjs.SpecApi.register(artjs.It,a,b,c)}function before(a){return artjs.SpecApi.register(artjs.Before,a)}function eq(a){return new artjs.EqMatcher(a)}function beA(a){return new artjs.AMatcher(a)}function beTrue(){return new artjs.TrueMatcher}function beFalse(){return new artjs.FalseMatcher}function beNull(){return new artjs.NullMatcher}function contain(a){return new artjs.ContainMatcher(a)}function receive(a){return new artjs.ReceiveMatcher(a)}function expect(a){return new artjs.Actual(a)}function mock(){return new artjs.Mock(artjs.$A(arguments))}function subject(){return artjs.Spec.getSubject()}function sspec(a,b){return spec(a,b,!0)}function ddescribe(a,b,c){return describe(a,b,!0)}function ccontext(a,b,c){return context(a,b,!0)}function iit(a,b,c){return it(a,b,!0)}var artjs={VERSION:"0.3.2",component:{utils:{}},data:{},dom:{},events:{},math:{},model:{},net:{},spec:{matcher:{},node:{},runner:{},view:{}},template:{},transition:{},ui:{},utils:{},view:{}};artjs.log=function(){typeof console=="object"&&console.log.apply(console,arguments)},artjs.p=artjs.log,artjs.Array=artjs.utils.Array={_name:"Array",toString:function(){return this._name},build:function(a,b,c){var d=new Array(a);for(var e=0;e<a;e++)d[e]=b.call(c,e,d);return d},fromRange:function(a){var b=a.y-a.x,c=new Array(b);for(var d=0;d<b;d++)c[d]=a.x+d;return c},first:function(a){return this.getItemAt(a,0)},second:function(a){return this.getItemAt(a,1)},third:function(a){return this.getItemAt(a,2)},last:function(a){return this.getItemAt(a,a.length-1)},beforeLast:function(a){return this.getItemAt(a,a.length-2)},getItemAt:function(a,b){return a[b]},includesInv:function(a,b){return this.includes(b,a)},includes:function(a,b){return Boolean(this.indexOf(a,b)+1)},includesAll:function(a,b){return this._includesAll.arr=a,this.all(b,this._includesAll)},insertAt:function(a,b,c){return a.slice(0,b).concat(c).concat(a.slice(b))},removeAt:function(a,b){return this.first(a.splice(b,1))},removeItem:function(a,b,c){var d=[],e=a.length;while(e-->0)if(a[e]===b){d.push(e),this.removeAt(a,e);if(c)break}return d.reverse()},removeItems:function(a,b){return this._contains.items=b,this.reject(a,this._contains,this)},$removeItems:function(a,b){return this._contains.items=b,this.$reject(a,this._contains,this)},arrify:function(a,b){var c=[],d=a.length;for(var e=b||0;e<d;e++)c.push(a[e]);return c},map:function(a,b,c){var d=[],e;for(var f in a)a.hasOwnProperty(f)&&(e=a[f],d.push(b.call(c,e,parseInt(f,10),a)));return d},invoke:function(a,b){var c=artjs.$D(this,"_invoke",b,this.arrify(arguments,2));return this.map(a,c.callback())},pluck:function(a,b){return this._pluck.prop=b,this.map(a,this._pluck,this)},each:function(a,b,c){var d;for(var e in a)a.hasOwnProperty(e)&&(d=a[e],b.call(c,d,parseInt(e,10),a))},eachItem:function(a,b,c){var d;for(var e in a)a.hasOwnProperty(e)&&(d=a[e],b.call(c,d,a))},eachIndex:function(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c,parseInt(d,10),a)},inject:function(a,b,c,d){var e=b,f,g;for(var h in a)a.hasOwnProperty(h)&&(g=a[h],f=c.call(d,e,g,parseInt(h,10),a),f&&(e=f));return e},flatten:function(a){return this.inject(a,[],this._flatten,this)},select:function(a,b,c){var d=[],e=b||this.identity,f;for(var g in a)a.hasOwnProperty(g)&&(f=a[g],e.call(c,f,parseInt(g,10),a)&&d.push(f));return d},$select:function(a,b,c){var d=a.length-1,e=b||this.identity,f;for(var g=d;g>=0;g--)f=a[g],e.call(c||this,f,parseInt(g,10),a)||this.removeAt(a,g)},reject:function(a,b,c){var d=[],e=b||this.identity,f;for(var g in a)a.hasOwnProperty(g)&&(f=a[g],e.call(c,f,parseInt(g,10),a)||d.push(f));return d},$reject:function(a,b,c){var d=a.length-1,e=b||this.identity,f,g=[];for(var h=d;h>=0;h--)f=a[h],e.call(c||this,f,parseInt(h,10),a)&&g.push(this.removeAt(a,h));return g},detect:function(a,b,c){var d=b||this.identity,e;for(var f in a)if(a.hasOwnProperty(f)){e=a[f];if(d.call(c||this,e,parseInt(f,10),a))return e}return null},equal:function(a,b,c){var d=artjs.$D(this,"areItemsEqual",b,c);return this.all(this.transpose(a),d.callback(),this)},areItemsEqual:function(a,b,c,d,e){return this.uniq(a,d,e).length==1},transpose:function(a){var b=[],c=a.length,d=Math.max.apply(Math,this.pluck(a,"length"));for(var e=0;e<d;e++){b[e]=[];for(var f=0;f<c;f++)b[e][f]=a[f][e]}return b},all:function(a,b,c){var d=b||this.identity,e;for(var f in a)if(a.hasOwnProperty(f)){e=a[f];if(!d.call(c||this,e,parseInt(f,10),a))return!1}return!0},any:function(a,b,c){var d=b||this.identity,e;for(var f in a)if(a.hasOwnProperty(f)){e=a[f];if(d.call(c||this,e,parseInt(f,10),a))return!0}return!1},identity:function(a){return a},partition:function(a,b,c){var d=new artjs.Point([],[]),e;for(var f in a)a.hasOwnProperty(f)&&(e=a[f],(b.call(c,e,f,a)?d.x:d.y).push(e));return d},uniq:function(a,b,c){var d=this.groupBy(a,b,c,!0);return this.map(this.pluck(d,"y"),this.first,this)},groupBy:function(a,b,c,d){var e=b||this.identity,f=[],g={},h,i;for(var j in a)a.hasOwnProperty(j)&&(i=a[j],h=String(e.call(c||this,i,parseInt(j,10))),g[h]==undefined&&f.push(new artjs.Point(h,g[h]=[])),g[h].push(i));return d||(f=artjs.Object.fromPoints(f)),f},indexOf:function(a,b){return a.indexOf?a.indexOf(b):this._indexOf(a,b)},intersection:function(a){return this._intersectionSelect.array=a.slice(1),this.select(a[0],this._intersectionSelect,this)},selectNonEmpty:function(a){return this.select(a,this.isNotEmpty,this)},compact:function(a){return this.reject(a,artjs.Object.isNull,this)},isEmpty:function(a){return a.length==0},isNotEmpty:function(a){return!this.isEmpty(a)},numerize:function(a){return this.map(a,this._numerize)},print:function(a){this.eachItem(a,this._print,this)},sum:function(a){return Number(this.inject(a,0,this._sum,this))},stringify:function(a){return this.map(a,this._stringify,this)},_flatten:function(a,b,c){a.splice.apply(a,[a.length,0].concat(b))},_includesAll:function(a,b){return this.includesInv(a,arguments.callee.arr)},_intersectionSelect:function(a){return this._intersectionInclude.item=a,this.all(arguments.callee.array,this._intersectionInclude,this)},_intersectionInclude:function(a,b){return this.includes(a,arguments.callee.item)},_invoke:function(a,b,c,d,e){return a[d].apply(a,e)},_numerize:function(a){return Number(a)},_pluck:function(a){return a[arguments.callee.prop]},_print:function(a){artjs.p(a)},_sum:function(a,b){return a+b},_stringify:function(a){return artjs.Object.isNull(a)?"":a.toString()},_indexOf:function(a,b){for(var c in a)if(a.hasOwnProperty(c)&&a[c]===b)return parseInt(c);return-1},_contains:function(a){return this.contains(arguments.callee.items,a)}},artjs.Object=artjs.utils.Object={_name:"Object",QUERY_DELIMITER:"&",toString:function(){return this._name},copy:function(a){var b={};return this.copyProps(a,b),b},copyProps:function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])},extend:function(a,b){this.copyProps(b,a)},merge:function(a,b){var c=this.copy(a);return this.extend(c,b),c},removeValue:function(a,b){var c=artjs.$D(this,"_eachPairDeleteValue",a,b);this.eachPair(a,c.callback())},removeKeys:function(a,b){var c=artjs.$D(this,"_eachKeyDeleteKey",a);artjs.Array.each(b,c.callback())},removeValues:function(a,b){var c=artjs.$D(this,"_invertedRemoveValue",a);artjs.Array.eachItem(b,c.callback())},keys:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},values:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},map:function(a,b,c){var d=[];for(var e in a)a.hasOwnProperty(e)&&d.push(b.call(c,e,a[e]));return d},mapValue:function(a,b,c){var d={};for(var e in a)a.hasOwnProperty(e)&&(d[e]=b.call(c,e,a[e]));return d},mapKey:function(a,b,c){var d={};for(var e in a)a.hasOwnProperty(e)&&(d[b.call(c,e,a[e])]=a[e]);return d},each:function(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c,a[d])},eachKey:function(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c,d)},eachPair:function(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c,d,a[d])},select:function(a,b,c){var d={},e;for(var f in a)a.hasOwnProperty(f)&&(e=a[f],b.call(c,e,f)&&(d[f]=e));return d},reject:function(a,b,c){var d={},e;for(var f in a)a.hasOwnProperty(f)&&(e=a[f],b.call(c,e)||(d[f]=e));return d},isArray:function(a){return this.is(a,Array)},isString:function(a){return this.is(a,String)},is:function(a,b){return a.constructor===b},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},isNotEmpty:function(a){return!this.isEmpty(a)},build:function(a,b,c){var d={},e;for(var f in a)a.hasOwnProperty(f)&&(e=a[f],d[e]=b.call(c,e));return d},fromPoints:function(a){var b={},c;for(var d in a)a.hasOwnProperty(d)&&(c=a[d],b[c.x]=c.y);return b},fromArray:function(a){var b={},c;for(var d in a)a.hasOwnProperty(d)&&(c=a[d],b[c[0]]=c[1]);return b},toArray:function(a){return this.map(a,this._keyValueArray,this)},includes:function(a,b){for(var c in a)if(a.hasOwnProperty(c)&&a[c]===b)return!0;return!1},includesAll:function(a,b){var c=artjs.$D(this,"_invertedIncludes",a);return this.all(b,c.callback())},all:function(a,b){for(var c in a)if(a.hasOwnProperty(c)&&!b(a[c]))return!1;return!0},toQueryString:function(a){return this._toQueryStringWithPrefix(a,"")},_toQueryStringWithPrefix:function(a,b){var c=artjs.$D(this,"_pairToQueryString",b);return this.map(a,c.callback()).join(this.QUERY_DELIMITER)},_pairToQueryString:function(a,b,c){var d;c=artjs.String.isBlank(c)?a:c+"["+a+"]";if(typeof b=="object")if(isNaN(b.length))d=this._toQueryStringWithPrefix(b,c);else{var e=artjs.$D(this,"_parseArrayValue",c+"[]");d=artjs.Array.map(b,e.callback()).join(this.QUERY_DELIMITER)}else d=c+"="+encodeURIComponent(this._primitiveToQueryString(b));return d},_parseArrayValue:function(a,b,c){return this._pairToQueryString(c,a)},_primitiveToQueryString:function(a){var b;switch(typeof a){case"number":b=a.toString();break;case"boolean":b=Number(a).toString();break;default:b=a}return b},_invertedIncludes:function(a,b){return this.includes(b,a)},_keyValueArray:function(a,b){return[a,b]},_eachPairDeleteValue:function(a,b,c,d){b===d&&this._deleteKey(c,a)},_eachKeyDeleteKey:function(a,b,c,d){this._deleteKey(d,a)},_deleteKey:function(a,b){delete a[b]},_invertedRemoveValue:function(a,b,c){this.removeValue(c,a)},isNull:function(a){return a==null},isPresent:function(a){return!this.isNull(a)},getDefault:function(a,b){return this.isNull(a)?b:a}},artjs.Class=artjs.utils.Class=function(a,b,c,d){var e=new artjs.ClassBuilder(a,b,c,d);return e.ctor},artjs.Class._name="Class",artjs.Class.toString=function(){return this._name},artjs.ClassBuilder=function(a,b,c,d){this.ctor=a||this._defaultConstructor(),this.ctor._onCreated=this._defaultOnCreated,this.ctor._onExtended=this._defaultOnExtended;if(d){var e=function(){var a=arguments.callee.caller,b=a.superclass||a.super;return b.apply(this,arguments)};artjs.Object.extend(this.ctor,d),artjs.Object.extend(this.ctor.prototype,d.prototype),this.ctor.superclass=d,this.ctor.super=e,this.ctor.prototype.super=e}else this.ctor.prototype={};this.ctor.prototype.ctor=this.ctor,b&&artjs.Object.eachPair(b,this._eachProto,this),c&&artjs.Object.eachPair(c,this._eachStat,this),this.ctor._onCreated(),d&&this.ctor._onExtended()},artjs.ClassBuilder.prototype={_defaultOnCreated:function(){this.subclasses=[]},_defaultOnExtended:function(){this.superclass.subclasses.push(this)},_defaultConstructor:function(){return function(){arguments.callee.superclass&&this.super.apply(this,arguments)}},_eachProto:function(a,b){this._each(this.ctor.prototype,a,b)},_eachStat:function(a,b){this._each(this.ctor,a,b)},_each:function(a,b,c){typeof c=="function"&&a[b]&&(c.super=a[b]),a[b]=c}},artjs.Delegate=artjs.events.Delegate=artjs.Class(function(a,b){this.object=a,this.method=artjs.Object.isString(b)?this.object[b]:b,this.args=artjs.Array.arrify(arguments,2)},{invoke:function(){var a=artjs.Array.arrify(arguments).concat(this.args);return this.method.apply(this.object,a)},callback:function(a){var b=function(){var a=arguments.callee,b=a.delegate,c=artjs.Array.arrify(arguments);return a.withSource&&c.unshift(this),b.invoke.apply(b,c)};return b.withSource=a,b.delegate=this,b}},{callback:function(a,b,c){var d=new this(a,b),e=d.callback(c);return d.args=artjs.Array.arrify(arguments,3),e},create:function(a,b){var c=new this(a,b);return c.args=artjs.Array.arrify(arguments,2),c},bindAll:function(a){var b=a.ctor?a.ctor.prototype:a,c=artjs.Object.keys(artjs.Object.select(b,this._isCallback,this)),d=c.concat(artjs.Array.arrify(arguments,1));this._bindSource=a,this._bindTarget=a,artjs.Array.each(d,this._bindEach,this)},delegateTo:function(a,b){var c=artjs.Object.keys(artjs.Object.select(a,this._isPublicMethod,this));this._bindSource=a,this._bindTarget=b,artjs.Array.each(c,this._bindEach,this)},func:function(a,b){return this.create(null,a,b)},_isCallback:function(a,b){return artjs.String.startsWith(b,"_on")&&this._isFunction(a,b)},_isPublicMethod:function(a,b){return!artjs.String.startsWith(b,"_")&&this._isFunction(a,b)},_isFunction:function(a,b){return a instanceof Function},_bindEach:function(a){this._bindTarget[a]=this.callback(this._bindSource,a)}}),artjs.Math=artjs.utils.Math={_name:"Math",toString:function(){return this._name},sgn:function(a){return a===0?0:Math.abs(a)/a},limit:function(a,b,c){return Math.min(Math.max(a,b),c)},sawtooth:function(a,b,c){return a-this.stairs(a,b,c)*(c-b)},stairs:function(a,b,c){return Math.floor((a-b)/(c-b))},isNonNegative:function(a){return Boolean(this.sgn(a)+1)}},artjs.String=artjs.utils.String={_name:"String",addZeros:function(a,b,c){return this.align(a,b,"0",c)},align:function(a,b,c,d){var e=this.getMultiPattern(c,b-a.length);return d?a+e:e+a},blank:function(){return""},capitalize:function(a){return artjs.Array.map(a.split(" "),this.capitalizeWord).join(" ")},capitalizeWord:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},capitalizeUnderscored:function(a){return this.strip(this.capitalize(a.replace(new RegExp("_","g")," ")))},countPattern:function(a,b){return a.match(new RegExp(b,"g")).length},first:function(a){return a.substr(0,1)},formatPrice:function(a){var b=a.toString().split("."),c=b[0],d=b[1];return c+"."+(d?this.addZeros(d,2,!0):"00")},getMultiPattern:function(a,b){var c=this.blank();while(b-->0)c+=a;return c},isBlank:function(a){return artjs.Object.isNull(a)||this.isEmpty(a)},isEmpty:function(a){return this.strip(a)==this.blank()},isPresent:function(a){return!this.isBlank(a)},last:function(a){return a.substr(a.length-1,1)},match:function(a,b){var c=b.exec(a);return c&&artjs.Array.last(c)},nullifyEmpty:function(a){return this.isEmpty(a)?null:a},truncate:function(a,b,c,d){if(a.length>b){var e=a.substr(0,b);if(c){if(a[b]==" ")return this._truncation(e,d);var f=e.lastIndexOf(" ");return f>-1?this._subtruncation(a,f,d):this._subtruncation(a,b,d)}return this._subtruncation(a,b,d)}return a},pluralize:function(a,b){return b+(a==1?this.blank():"s")},startsWith:function(a,b){var c=new RegExp("^"+b);return c.test(a)},strip:function(a){return a.replace(/\s/g,this.blank())},sub:function(a,b,c){var d=a.length,e=c===0;return a+=a,b%=d,c%=d,b<0&&(b+=d),c<0&&(c+=d),e&&(c=d),c<b&&(c+=d),a.substring(b,c)},toBoolean:function(a){return a==="true"},toJson:function(a){return JSON.parse(a)},toS:function(a){return artjs.Object.isNull(a)?this.blank():a},toString:function(){return this._name},trim:function(a,b,c){var d=b||" ",e=c||"";return a.replace(new RegExp("^"+d+"+"),e).replace(new RegExp(d+"+$"),e)},_subtruncation:function(a,b,c){return this._truncation(a.substr(0,b),c)},_truncation:function(a,b){return a+(b||"...")}},artjs.Date=artjs.utils.Date={_name:"Date",toString:function(){return this._name},getTime:function(){return(new Date).getTime()},monthDaysNum:function(a){var b=this.copy(a);return b.setMonth(b.getMonth()+1),b.setDate(0),b.getDate()},firstDate:function(a){var b=this.copy(a);return b.setDate(1),b},firstDay:function(a){return this.firstDate(a).getDay()},toHMS:function(a,b){var c=artjs.String;return b=b||":",c.addZeros(a.getHours().toString(),2,!1)+b+c.addZeros(a.getMinutes().toString(),2,!1)+b+c.addZeros(a.getSeconds().toString(),2,!1)},toYMD:function(a,b){var c=artjs.String;return b=b||"-",a.getFullYear()+b+c.addZeros((a.getMonth()+1).toString(),2,!1)+b+c.addZeros(a.getDate().toString(),2,!1)},toDMY:function(a,b){b=b||"-";var c=this.toYMD(a,b),d=c.split(b);return d.reverse(),d.join(b)},fromYMD:function(a,b){b=b||"-";var c=a.split(b),d=artjs.Array;return new Date(parseInt(d.first(c),10),parseInt(d.second(c),10)-1,parseInt(d.third(c),10))},fromDMY:function(a,b){b=b||"-";var c=a.split(b),d=artjs.Array;return new Date(parseInt(d.third(c),10),parseInt(d.second(c),10)-1,parseInt(d.first(c),10))},minutesToHM:function(a,b){return b=b||":",Math.floor(a/60)+b+artjs.String.addZeros((a%60).toString(),2)},hmToMinutes:function(a,b){b=b||":";var c=a.split(b);return 60*parseInt(c[0],10)+parseInt(c[1],10)},secondsToMS:function(a,b){var c=a%60,d=(a-c)/60,e=artjs.String;return b=b||":",e.addZeros(d.toString(),2)+b+e.addZeros(c.toString(),2)},msToSeconds:function(a,b){b=b||":";var c=a.split(b);return 60*parseInt(c[0],10)+parseInt(c[1],10)},secondsToHMS:function(a,b){var c=a%60,d=(a-c)/60;return b=b||":",this.minutesToHM(d,b)+b+artjs.String.addZeros(c.toString(),2)},miliToHMSM:function(a){var b=a%1e3,c=(a-b)/1e3,d=c%60,e=(c-d)/60,f=e%60,g=(e-f)/60,h=g;return h.toString()+":"+artjs.String.addZeros(f.toString(),2)+":"+artjs.String.addZeros(d.toString(),2)+"."+artjs.String.addZeros(b.toString(),3)},miliToMSM:function(a){var b=a%1e3,c=(a-b)/1e3,d=c%60,e=(c-d)/60,f=e;return f.toString()+":"+artjs.String.addZeros(d.toString(),2)+"."+artjs.String.addZeros(b.toString(),3)},copy:function(a){return new Date(a)},getDateShifted:function(a,b){var c=this.copy(a);return c.setDate(a.getDate()+b),c},stripDayTime:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())}},artjs.Element=artjs.utils.Element={HIDDEN_ELEMENTS:[],DEFAULT_DISPLAY:"",MAIN_OBJ_RE:/^\w+/,SUB_OBJ_RE:/\[\w+\]/g,SIZE_STYLE_RE:/^(\d+)px$/,BROWSERS_STYLES:["","-o-","-ms-","-moz-","-khtml-","-webkit-"],_name:"Element",toString:function(){return this._name},show:function(a){var b=this._getHidden(a);artjs.Array.removeItem(this.HIDDEN_ELEMENTS,b);var c=b&&b.display||a.style.display;a.style.display=c=="none"?this.DEFAULT_DISPLAY:c},hide:function(a){var b=this._getHidden(a);b||(this.HIDDEN_ELEMENTS.push({element:a,display:a.style.display}),a.style.display="none")},toggle:function(a){this.setVisible(a,this.isHidden(a))},setVisible:function(a,b){b?this.show(a):this.hide(a)},isHidden:function(a){var b=this._getHidden(a);return b||a.style.display=="none"},_getHidden:function(a){var b=artjs.$D(this,"_detectHiddenElement",a);return artjs.Array.detect(this.HIDDEN_ELEMENTS,b.callback(),this)},_detectHiddenElement:function(a,b,c,d){return a.element==d},getSize:function(a,b){return this.getBounds(a,b).getSize()},getBounds:function(a,b,c){var d=b&&this.isHidden(a);d&&this.show(a);var e=a.getBoundingClientRect(),f=new artjs.Rectangle(e.left,e.top,e.right,e.bottom);return c||f.moveBy(this.getScrollPosition()),d&&this.hide(a),f},setWidth:function(a,b){a.style.width=b+"px"},setHeight:function(a,b){a.style.height=b+"px"},setStyle:function(a,b,c){a.style[b]=c},extendStyle:function(a,b){artjs.Object.extend(a.style,b)},transitionStyle:function(a,b,c,d){return this._effectStyle(this._getTransitionStyleValue(a,b,c,d))},getSizeStyle:function(a,b){return this.getSizeStyleValue(this.getStyle(a,b))},getSizeStyleValue:function(a){var b=a.match(this.SIZE_STYLE_RE);return b&&Number(b[1])||0},children:function(a){return artjs.$A(a.childNodes)},elements:function(a){return this.filterElements(this.children(a))},elementAt:function(a,b){return artjs.Array.getItemAt(this.elements(a),b)},filterElements:function(a){return artjs.Array.select(a,this.isElement,this)},isElement:function(a){return a.nodeType==Node.ELEMENT_NODE},isText:function(a){return a.nodeType==Node.TEXT_NODE},remove:function(a){return a.parentNode.removeChild(a)},removeAt:function(a,b){return this.remove(this.elementAt(a,b))},parent:function(a){return a.parentNode},firstElement:function(a){return artjs.Array.first(this.elements(a))},lastElement:function(a){return artjs.Array.last(this.elements(a))},prev:function(a){var b=a;do b=b.previousSibling;while(b&&!this.isElement(b));return b},next:function(a){var b=a;do b=b.nextSibling;while(b&&!this.isElement(b));return b},clone:function(a,b){return a.cloneNode(b)},insert:function(a,b){return this.putAtBottom(b,a)},putAtBottom:function(a,b){var c=this.clone(a,!0);return b.appendChild(c),c},putAtTop:function(a,b){var c=artjs.Array.first(this.children(b));return c?this.putBefore(a,c):this.putAtBottom(a,b)},putAfter:function(a,b){var c=this.next(b);return c?this.putBefore(a,c):this.putAtBottom(a,this.parent(b))},putBefore:function(a,b){return this.parent(b).insertBefore(a,b)},replace:function(a,b,c){var d=this.parent(b),e=this.elements(d).indexOf(b);return c&&(a=this.clone(a,!0)),d.replaceChild(a,b),this.elements(d)[e]},center:function(a){this.setPosition(a,this.getCenteredPosition(a))},centerH:function(a){var b=this.getCenteredPosition(a);this.setX(a,b.x)},centerV:function(a){var b=this.getCenteredPosition(a);this.setY(a,b.y)},getCenteredPosition:function(a){return this.getWindowSize().sub(this.getSize(a)).times(.5).add(this.getScrollPosition())},setPosition:function(a,b){this.setX(a,b.x),this.setY(a,b.y)},getPosition:function(a,b){return this.getBounds(a,!1,b).getLeftTop()},setX:function(a,b){a.style.left=b+"px"},setY:function(a,b){a.style.top=b+"px"},enable:function(a){a.removeAttribute("disabled")},disable:function(a){a.setAttribute("disabled","disabled")},setEnabled:function(a,b){b?this.enable(a):this.disable(a)},serialize:function(a){var b=artjs.Selector,c=artjs.Array,d=b.findAll(a,"input[type=text]"),e=c.select(b.findAll(a,"input[type=checkbox]"),this.selectChecked,this),f=c.select(b.findAll(a,"input[type=radio]"),this.selectChecked,this),g=b.findAll(a,"select"),h=b.findAll(a,"textarea"),i=b.findAll(a,"input[type=hidden]"),j=c.flatten([d,e,f,g,h,i]);return c.inject(j,{},this.serializeInject,this)},selectChecked:function(a){return a.checked},serializeInject:function(a,b,c){var d=b.name,e=b.value,f=artjs.Array.first(d.match(this.MAIN_OBJ_RE)),g=d.match(this.SUB_OBJ_RE),h=g&&artjs.Array.map(artjs.$A(g),this.mapSub,this)||[];h.unshift(f);var i=a,j=h.length-1,k,l;for(k=0;k<j;k++)l=h[k],i[l]instanceof Object||(i[l]={}),i=i[l];return i[h[k]]=e,a},mapSub:function(a,b){return artjs.String.sub(a,1,-1)},getContent:function(a){return a.innerHTML},setContent:function(a,b){a.innerHTML=b},clear:function(a){this.setContent(a,"")},hasClass:function(a,b){return artjs.Array.includes(this.getClasses(a),b)},getClasses:function(a){var b=artjs.String.trim(a.className);return artjs.String.isBlank(b)?[]:b.split(" ")},setClass:function(a,b,c){c?this.addClass(a,b):this.removeClass(a,b)},setClasses:function(a,b){this._setClassPair.element=a,artjs.Object.eachPair(b,this._setClassPair,this)},_setClassPair:function(a,b){this.setClass(arguments.callee.element,a,b)},addClasses:function(a,b){this._addClass.element=a,artjs.Array.each(b,this._addClass,this)},_addClass:function(a){this.addClass(arguments.callee.element,a)},addClass:function(a,b){var c=this.getClasses(a);this.hasClass(a,b)||(c.push(b),a.className=c.join(" "))},removeClass:function(a,b){var c=this.getClasses(a);this.hasClass(a,b)&&(artjs.Array.removeItem(c,b),a.className=c.join(" "))},toggleClass:function(a,b){this.setClass(a,b,!this.hasClass(a,b))},getAttributes:function(a){return artjs.Object.fromArray(artjs.Array.map(artjs.$A(a.attributes),this._mapAttribute,this))},getData:function(a){var b=this.getAttributes(a),c=artjs.Object.select(b,this._isDataAttribute,this);return artjs.Object.mapKey(c,this._removeDataPrefix,this)},getDataValue:function(a,b){return this.getData(a)[b]},_isDataAttribute:function(a,b){return artjs.String.startsWith(b,"data-")},_removeDataPrefix:function(a){return a.replace(/^data\-/,"")},_mapAttribute:function(a){return[a.name,a.value]},setAlpha:function(a,b){a.style.opacity=b,a.style.filter="alpha(opacity="+100*b+")"},getAlpha:function(a){if(a.style.filter){var b=/alpha\(opacity=(\d+(\.\d+)?)\)/;return Number(artjs.Array.second(a.style.filter.match(b)))}return a.style.opacity},getStyle:function(a,b){return window.getComputedStyle?window.getComputedStyle(a,null).getPropertyValue(b):a.currentStyle[b]},getPadding:function(a){return new artjs.Rectangle(this.getSizeStyle(a,"padding-left")||this.getSizeStyle(a,"paddingLeft"),this.getSizeStyle(a,"padding-top")||this.getSizeStyle(a,"paddingTop"),this.getSizeStyle(a,"padding-right")||this.getSizeStyle(a,"paddingRight"),this.getSizeStyle(a,"padding-bottom")||this.getSizeStyle(a,"paddingBottom"))},getDocumentSize:function(){var a=window.document,b=a.body;return new artjs.Point(b.clientWidth||a.width,b.clientHeight||a.height)},getWindowSize:function(){var a=document.documentElement;return new artjs.Point(a.clientWidth||window.innerWidth,a.clientHeight||window.innerHeight)},getScrollPosition:function(){var a=document.documentElement;return new artjs.Point(a.scrollLeft||window.scrollX,a.scrollTop||window.scrollY)},onClick:function(a,b){return artjs.on("click",a,b)},render:function(a){var b=this.getClasses(a),c=this.getAttributes(a);return delete c.id,delete c["class"],this.toTagString(a)+this.toIdString(a)+artjs.Array.map(b,this.toClassString).join("")+artjs.Object.map(c,this.toAttrString).join("")},toTagString:function(a){return a.tagName.toLowerCase()},toIdString:function(a){return"#"+a.id},toClassString:function(a){return"."+a},toAttrString:function(a,b){return"["+a+"="+b+"]"},_getTransitionStyleValue:function(a,b,c,d){return[a,b+"s",c,d+"s"].join(" ")},_effectStyle:function(a){return this._browserMap.value=a,artjs.Object.fromArray(artjs.Array.map(this.BROWSERS_STYLES,this._browserMap,this))},_browserMap:function(a){return[a+"transition",arguments.callee.value]}},artjs.Lang=artjs.utils.Lang={_name:"Lang",setLang:function(a){this._lang=a},getLang:function(a){return this._lang},t:function(){var a=artjs.$A(arguments);return this._node=this._translations[this._lang],artjs.Array.each(a,this._updateNode,this),this._node},_updateNode:function(a){this._node=this._node[a]},_lang:"en",_translations:{en:{datepicker:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["SU","MO","TU","WE","TH","FR","SA"]}},pl:{datepicker:{months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],days:["Nd","Po","Wt","Śr","Cz","Pt","So"]}}}},artjs.Toggler=artjs.utils.Toggler=artjs.Class(function(a){this.unique=a,this.current=null,this.onActivate=new artjs.Event("Toggler::onActivate"),this.onDeactivate=new artjs.Event("Toggler::onDeactivate")},{toggle:function(a){if(!this.unique||this.current!=a)this.onDeactivate.fire(this),this.current=a,this.onActivate.fire(this)}},{_name:"Toggler",toString:function(){return this._name}}),artjs.ClassToggler=artjs.utils.ClassToggler=artjs.Class(function(a){this._className=a,this._toggler=new artjs.Toggler,this._toggler.onActivate.add(artjs.$D(this,"_onActivate")),this._toggler.onDeactivate.add(artjs.$D(this,"_onDeactivate")),this.onActivate=new artjs.Event("ClassToggler::onActivate"),this.onDeactivate=new artjs.Event("ClassToggler::onDeactivate")},{toggle:function(a){this._toggler.toggle(a)},getCurrent:function(){return this._toggler.current},_onActivate:function(a){a.current&&artjs.Element.addClass(a.current,this._className),this.onActivate.fire(this)},_onDeactivate:function(a){a.current&&artjs.Element.removeClass(a.current,this._className),this.onDeactivate.fire(this)}},{_name:"ClassToggler",toString:function(){return this._name}}),artjs.Event=artjs.events.Event=artjs.Class(function(a){this._name=a,this._items=[]},{fire:function(){return this._args=artjs.$A(arguments),artjs.Array.map(this._items,this._delegateToResult,this)},add:function(a){this._items.push(a)},remove:function(a){artjs.Array.removeItem(this._items,a)},removeAll:function(){this._items.splice(0)},getLength:function(){return this._items.length},getName:function(){return this._name},getItems:function(){return this._items},_delegateToResult:function(a){return a.invoke.apply(a,this._args)}}),artjs.Point=artjs.math.Point=function(a,b){this.x=a,this.y=b},artjs.Point.prototype={getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},dot:function(a){return this.x*a.x+this.y*a.y},add:function(a){return new artjs.Point(this.x+a.x,this.y+a.y)},sub:function(a){return this.add(a.getReversed())},getReversed:function(){return this.times(-1)},reverseX:function(){return this.x=-this.x,this},reverseY:function(){return this.y=-this.y,this},transpose:function(){var a=this.x;return this.x=this.y,this.y=a,this},getTransposed:function(){return new artjs.Point(this.y,this.x)},reverse:function(){return this.reverseX(),this.reverseY(),this},times:function(a){return new artjs.Point(a*this.x,a*this.y)},toString:function(){return"["+this.x+", "+this.y+"]"}},artjs.Rectangle=artjs.math.Rectangle=function(a,b,c,d){this.left=a,this.top=b,this.right=c,this.bottom=d},artjs.Rectangle.prototype={getWidth:function(){return this.right-this.left},getHeight:function(){return this.bottom-this.top},getArea:function(){return this.getWidth()*this.getHeight()},getLeftTop:function(){return new artjs.Point(this.left,this.top)},getRightTop:function(){return new artjs.Point(this.right,this.top)},getRightBottom:function(){return new artjs.Point(this.right,this.bottom)},getLeftBottom:function(){return new artjs.Point(this.left,this.bottom)},getSize:function(){return new artjs.Point(this.getWidth(),this.getHeight())},moveBy:function(a){this.left+=a.x,this.top+=a.y,this.right+=a.x,this.bottom+=a.y}},artjs.ElementBuilder=artjs.dom.ElementBuilder=artjs.Class(function(a,b,c,d){this.name=a,this.attributes=b,this.value=c,this.isEmpty=Boolean(d)},{toString:function(){var a=this.attributes&&artjs.Object.isNotEmpty(this.attributes)?" "+this.ctor._attributesString(this.attributes)+" ":"",b;return this.value?b=">"+this.value+"</"+this.name+">":this.empty?b="/>":b="></"+this.name+">","<"+this.name+a+b},getElement:function(){var a=document.createElement(this.name),b=this.ctor._setAttribute;return b.e=a,artjs.Object.eachPair(this.attributes,b),this.value&&!this.isEmpty&&(a.innerHTML=this.value),a}},{_KEY_TRANSLATOR:{className:"class",forField:"for"},build:function(a,b,c,d){return new this(a,b,c,d)},parse:function(a){var b=document.createElement("div");return b.innerHTML=a,b.firstChild},unparse:function(a){var b=document.createElement("div");return artjs.Element.insert(b,a),artjs.Element.getContent(b)},create:function(a,b,c,d){return this.parse(this.build(a,b,c,d).toString())},getElement:function(a,b,c,d){return this.build(a,b,c,d).getElement()},getCollection:function(a,b){return this._getElement.element=b,artjs.Array.build(a,this._getElement).join("")},_getElement:function(a){return arguments.callee.element},_attributesString:function(a){return artjs.Array.map(artjs.Object.toArray(a),this._attributePairToString,this).join(" ")},_setAttribute:function(a,b){arguments.callee.e.setAttribute(a,b)},_attributePairToString:function(a){var b=this._KEY_TRANSLATOR[a[0]]||a[0],c=a[1];return b+'="'+c+'"'}}),artjs.Selector=artjs.dom.Selector={findAll:function(a,b){return this.getElements(b,a)},find:function(a,b){return this.getElement(b,a)},parent:function(a){return a.parentNode},getElement:function(a,b){return(b||document).querySelector(a)},getElements:function(a,b){return artjs.$A((b||document).querySelectorAll(a))},isDescendantOf:function(a,b){var c=this._getDescendants(a,b);return artjs.Object.isPresent(c)},isSelfOrDescendantOf:function(a,b){return a==b||this.isDescendantOf(a,b)},getElementById:function(a){return document.getElementById(a)},getElementsByTagName:function(a){return artjs.$A(document.getElementsByTagName(a))},isOnStage:function(a){return this.isDescendantOf(a)},_getDescendants:function(a,b){var c=[];while(a=this.parent(a))c.push(a);var d=c.indexOf(b||document.body);return d==-1?null:c.slice(0,d)}},artjs.Ajax=artjs.net.Ajax=artjs.Class(function(a,b,c){this._onReadyStateChangeDC=artjs.$DC(this,this._onReadyStateChange,!0),this._onProgressDC=artjs.$DC(this,this._onProgress,!0),this._onErrorDC=artjs.$DC(this,this._onError,!0),this.onSuccess=new artjs.Event("Ajax:onSuccess"),this.onFailure=new artjs.Event("Ajax:onFailure"),this.onProgress=new artjs.Event("Ajax:onProgress");var d=artjs.Ajax.Methods;this.url=a,this.data=b,this.method=c,this.requestData=b,this.requestMethod=c||d.GET,artjs.Array.includes(artjs.Ajax.SupportedMethods,this.requestMethod)||(this.requestData=this.requestData||{},this.requestData._method=this.requestMethod,this.requestMethod=d.POST),this._request=new XMLHttpRequest,this.requestUrl=this.url,this.requestData&&(this.requestQueryData=artjs.Object.toQueryString(this.requestData),this.requestMethod==d.GET&&(this.requestUrl+="?"+this.requestQueryData,this.requestQueryData=null)),this._request.open(this.requestMethod,this.requestUrl,!0),this.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.setRequestHeader("X-artjs-Version",artjs.VERSION),this.setRequestHeader("Accept","text/javascript, text/html, application/xml, text/xml, */*"),this.requestMethod==d.POST&&this.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),this._request.onreadystatechange=this._onReadyStateChangeDC,this._request.onprogress=this._onProgressDC,this._request.onerror=this._onErrorDC},{request:function(){this._request.send(this.requestQueryData)},abort:function(){this._request.abort()},getReadyState:function(){return this._request.readyState},getStatus:function(){return this._request.status},getStatusText:function(){return this._request.statusText},getResponseText:function(){return this._request.responseText},getResponseXML:function(){return this._request.responseXML},setRequestHeader:function(a,b){return this._request.setRequestHeader(a,b)},getResponseHeader:function(a){return this._request.getResponseHeader(a)},getAllResponseHeaders:function(){return this._request.getAllResponseHeaders()},_onProgress:function(a,b){var c=b.loaded/b.total;this.onProgress.fire(this,c)},_onError:function(a,b){this.onFailure.fire(this)},_onReadyStateChange:function(a){this.getReadyState()==artjs.Ajax.ReadyState.LOADED&&this.onSuccess.fire(this)}},{Methods:{GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE"},ReadyState:{UNINITIALIZED:0,OPEN:1,SENT:2,RECEIVING:3,LOADED:4},get:function(a,b,c){return artjs.Ajax.request(a,b,artjs.Ajax.Methods.GET,c)},post:function(a,b,c){return artjs.Ajax.request(a,b,artjs.Ajax.Methods.POST,c)},put:function(a,b,c){return artjs.Ajax.request(a,b,artjs.Ajax.Methods.PUT,c)},del:function(a,b,c){return artjs.Ajax.request(a,b,artjs.Ajax.Methods.DELETE,c)},request:function(a,b,c,d){var e=new artjs.Ajax(a,b,c);return d&&e.onSuccess.add(d),e.request(),e}}),artjs.Ajax.SupportedMethods=[artjs.Ajax.Methods.GET,artjs.Ajax.Methods.POST],artjs.Router=artjs.net.Router={ROUTE_RE:new RegExp("#!?/(.*)"),defaultController:null,mapping:{},_name:"Router",init:function(){this._update(),addEventListener("popstate",artjs.$DC(this,"_onPopState"))},navigateTo:function(a){var b=artjs.String.match(a,this.ROUTE_RE);this._navigateTo(artjs.String.toS(b))},toString:function(){return this._name},_onPopState:function(){this._update()},_navigateTo:function(a){var b=a.split("/"),c=b.shift(),d=b.shift(),e=this.mapping[c],f=e||this.defaultController;if(f){var g=new artjs.Delegate(f,d||"index");g.args=b,e||g.args.unshift(c),g.invoke()}},_update:function(){this.navigateTo(location.hash)}},artjs.List=artjs.data.List=artjs.Class(function(a){this.items=a||{},this.i=0,this.onChange=new artjs.Event("List::onChange"),this.allowDuplicates=!0,this.loop=!1},{addItem:function(a,b){if(this.allowDuplicates||!this.hasItem(a))this.items.push(a),b||this.onChange.fire(this);return this.getLength()},addItemAt:function(a,b,c){if(this.allowDuplicates||!this.hasItem(a))this.items=artjs.Array.insertAt(this.items,b,a),c||this.onChange.fire(this);return this.getLength()},removeItem:function(a,b,c){return artjs.Array.removeItem(this.items,a,b),c||this.onChange.fire(this),this.getLength()},removeItemAt:function(a,b){return artjs.Array.removeAt(this.items,a),b||this.onChange.fire(this),this.getLength()},removeAll:function(a){this.items.splice(0),a||this.onChange.fire(this)},getItemAt:function(a){return a=this.loop?artjs.Math.sawtooth(a,0,this.getLength()):a,this.items[a]},getItemIndex:function(a){return this.items.indexOf(a)},moveItem:function(a,b){var c=this.getItemAt(a);this.removeItemAt(a,!0),this.addItemAt(c,b)},getLength:function(){return this.items.length},getItems:function(){return this.items.concat()},setItems:function(a){this.items=a,this.onChange.fire(this)},hasItem:function(a){return artjs.Array.includes(this.items,a)},setPointerAtItem:function(a){if(!this.hasItem(a)){artjs.p("{List} There is no item "+a+" in List!");return}this.setPointer(this.getItemIndex(a))},reset:function(){this.i=0},getPointer:function(){return this.i},setPointer:function(a){this.i=a},decrease:function(){this.i--},increase:function(){this.i++},getCurrent:function(){return this.getItemAt(this.i)},getPrevious:function(){return this.getItemAt(this.i-1)},getNext:function(){return this.getItemAt(this.i+1)},getFirst:function(){return artjs.Array.first(this.items)},getLast:function(){return artjs.Array.last(this.items)},isEmpty:function(){return artjs.Array.isEmpty(this.items)},isLast:function(){return this.i==this.getLength()-1},toString:function(){return this.items.toString()}}),artjs.Queue=artjs.data.Queue=artjs.Class(function(a){this.onChange=new artjs.Event("Queue::onChange"),this.list=new artjs.List(a),this.list.onChange.add(artjs.$D(this,"_onChange"))},{_onChange:function(){this.onChange.fire(this)},addItem:function(a){return this.list.addItem(a)},getItem:function(){var a=this.list.getItemAt(0);return this.list.removeItemAt(0),a},setData:function(a){this.list=new artjs.List(a)},getLength:function(){return this.list.getLength()},isEmpty:function(){return this.list.isEmpty()},toString:function(){return this.list.toString()}}),artjs.Channel=artjs.events.Channel=artjs.Class(function(a){this._name=a,this._events={}},{register:function(a){this._events[a]=new artjs.Event(a)},addListener:function(a,b){this._getEvent(a).add(b)},removeListener:function(a,b){this._getEvent(a).remove(b)},fire:function(a,b){this._getEvent(a).fire(b)},getEvents:function(){return this._events},toString:function(){return this._name},_getEvent:function(a){var b=this._findEvent(a);return b||(this.register(a),b=this._findEvent(a)),b},_findEvent:function(a){return this._events[a]}}),artjs.Clock=artjs.events.Clock=artjs.Class(function(a,b){this._interval=a,this._repeat=b,this._id=null,this._counter=0,this._tickDC=artjs.$DC(this,"_tick"),this.onChange=new artjs.Event("Clock:onChange"),this.onComplete=new artjs.Event("Clock:onComplete")},{start:function(a){this.stop(),this.resume(a)},stop:function(){this.pause(),this._counter=0},pause:function(){clearInterval(this._id),this._id=null},resume:function(a){this._id=setInterval(this._tickDC,this._interval),a&&this._tick()},isRunning:function(){return this._id!==null},_tick:function(){this._counter++,this.onChange.fire(this),this._counter==this._repeat&&(this.stop(),this.onComplete.fire(this))}}),artjs.ElementEvent=artjs.events.Element=artjs.Class(function(a,b,c){this._element=a,this._delegate=c,a.addEventListener(b,artjs.$DC(this,"_onEvent"),!1)},{getElement:function(){return this._element},getTargets:function(a,b){if(a.target)return{origin:a.target,current:a.currentTarget,related:a.relatedTarget};var c=[a.fromElement,a.toElement];return b&&c.reverse(),{origin:c[0],current:this._element,related:c[1]}},_onEvent:function(a){this._delegate.invoke(a,this)}}),artjs.MouseEvent=artjs.events.Mouse=artjs.Class(function(a,b,c,d){this.super(a,b,c),this.over=!1,this.on=d},{_onEvent:function(a){this._edge(a)&&this.on!=this.over&&(this.over=this.on,this.super(a))},_edge:function(a){var b=this.getTargets(a,this.on),c=b.origin,d=b.current,e=b.related,f=artjs.Selector;return c==d&&!f.isDescendantOf(e,d)||f.isDescendantOf(c,d)&&!f.isSelfOrDescendantOf(e,d)}},null,artjs.ElementEvent),artjs.AbstractClickEvent=artjs.events.AbstractClick=artjs.Class(function(a,b,c,d){this.super(a,b,c),this._selector=d},{_onEvent:function(a){(!this._selector||this._matchesSelector(a))&&this.super(a)},_matchesSelector:function(a){var b=artjs.$findAll(this._element,this._selector);return artjs.Array.contains(b,a.target)}},null,artjs.ElementEvent),artjs.ClickEvent=artjs.events.Click=artjs.Class(function(a,b,c){this.super(a,"click",b,c)},null,null,artjs.AbstractClickEvent),artjs.DoubleClickEvent=artjs.events.DoubleClick=artjs.Class(function(a,b,c){this.super(a,"dblclick",b,c)},null,null,artjs.AbstractClickEvent),artjs.KeyEvent=artjs.events.Key=artjs.Class(function(a,b,c){this.super(a,"keydown",b),this._key=c},{_onEvent:function(a){var b=a.which||a.keyCode;(!this._key||this._key==b)&&this.super(a)}},null,artjs.ElementEvent),artjs.MouseMoveEvent=artjs.events.MouseMove=artjs.Class(function(a,b){this.super(a,"mousemove",b)},null,null,artjs.ElementEvent),artjs.MouseOverEvent=artjs.events.MouseOver=artjs.Class(function(a,b){this.super(a,"mouseover",b,!0)},null,null,artjs.MouseEvent),artjs.MouseOutEvent=artjs.events.MouseOut=artjs.Class(function(a,b){this.super(a,"mouseout",b)},null,null,artjs.MouseEvent),artjs.ChangeEvent=artjs.events.Change=artjs.Class(function(a,b){this.super(a,"change",b)},null,null,artjs.ElementEvent),artjs.BlurEvent=artjs.events.Blur=artjs.Class(function(a,b){this.super(a,"blur",b)},null,null,artjs.ElementEvent),artjs.EventMapping={mousemove:"MouseMoveEvent",mouseover:"MouseOverEvent",mouseout:"MouseOutEvent",click:"ClickEvent",dblclick:"DoubleClickEvent",change:"ChangeEvent",keydown:"KeyEvent",blur:"BlurEvent"},artjs.on=function(a,b,c,d){return new artjs[artjs.EventMapping[a]](b,c,d)},artjs.Timeline=artjs.events.Timeline=artjs.Class(null,{mark:function(){this._t2=artjs.Date.getTime();var a=this._t2-(this._t1||this._t2);return this._t1=this._t2,a}}),artjs.Timeout=artjs.events.Timeout=artjs.Class(function(a){artjs.$BA(this),this._delay=a,this.onComplete=new artjs.Event("Timeout:onComplete")},{start:function(){this._id=setTimeout(this._onTimeout,this._delay)},isRunning:function(){return this._id!==null},getDelay:function(){return this._delay},_onTimeout:function(){delete this._id,this.onComplete.fire(this)}},{fire:function(a,b){var c=new this(b);return c.onComplete.add(a),c.start(),c},defer:function(a){return this.fire(a,0)}}),artjs.Model=artjs.model.Base=artjs.Class(function(){this._channel=new artjs.Channel("Model channel"),this.onChange=new artjs.Event("Model::onChange")},{addProperties:function(a){var b=artjs.Object.mapValue(a,this._toProperty,this);Object.defineProperties(this,b),artjs.Object.eachPair(a,this._setProperty,this)},addProperty:function(a,b){Object.defineProperty(this,a,this._toProperty(a)),this._setProperty(a,b)},addPropertyListener:function(a,b,c){this._channel.addListener(a,b),c&&this._channel.fire(a,{newValue:this.getProperty(a)})},getChannel:function(){return this._channel},getProperty:function(a){return this[this.ctor.toPrivate(a)]},onPropertyChange:function(a,b,c){this._channel.fire(a,{newValue:b,oldValue:c}),this.onChange.fire(this,a,b,c)},removePropertyListener:function(a,b){this._channel.removeListener(a,b)},setProperties:function(a){artjs.Object.eachPair(a,this.setProperty,this)},setProperty:function(a,b){this._setProperty(this.ctor.toPrivate(a),b)},_createGetter:function(a){var b=function(){return this.getProperty(arguments.callee.prop)};return b.prop=a,b},_createSetter:function(a){var b=function(a){var b=arguments.callee.prop,c=this.getProperty(b);this.setProperty(b,a),this.onPropertyChange(b,a,c)};return b.prop=a,b},_setProperty:function(a,b){this[a]=b},_toProperty:function(a){return{configurable:!1,enumerable:!0,get:this._createGetter(a),set:this._createSetter(a)}}},{toPrivate:function(a){return"_"+a}}),artjs.ListModel=artjs.model.List=artjs.Class(function(){this.super(),this.addProperty("items"),this.addPropertyListener("items",artjs.$D(this,"_onItemsChange")),this._onItemChangeDelegate=artjs.$D(this,"_onItemChange"),this.onItemChange=new artjs.Event("ListModel::onItemChange"),this.onItemAdd=new artjs.Event("ListModel::onItemAdd"),this.onItemRemove=new artjs.Event("ListModel::onItemRemove")},{addItem:function(a){this._listenItem(a);var b=this.items.push(a);return this.onItemAdd.fire(this,a),b},removeItem:function(a){a.onChange.remove(this._onItemChangeDelegate);var b=artjs.Array.removeItem(this.items,a,!0);return this.onItemRemove.fire(this,a),b},_listenItem:function(a){a.onChange.add(this._onItemChangeDelegate)},_onItemChange:function(a,b){this.onItemChange.fire(this,a,b)},_onItemsChange:function(){artjs.Array.each(this.items,this._listenItem,this)}},null,artjs.Model),artjs.LocalStorage=artjs.model.LocalStorage=artjs.Class(function(a){this._namespace=a},{getItem:function(a){var b=this._getKey(a);return JSON.parse(localStorage.getItem(b))},getNamespace:function(){return this._namespace},setItem:function(a,b){var c=this._getKey(a);artjs.Object.isNull(b)?localStorage.removeItem(c):localStorage.setItem(c,JSON.stringify(b))},_getKey:function(a){return this.getNamespace()+":"+a}}),artjs.TransitionBase=artjs.transition.Base=artjs.Class(function(a,b,c,d,e,f,g){this._onDeferredDelegate=artjs.$D(this,"_onDeferred"),this.property=a,this.element=b,this.duration=artjs.Object.getDefault(d,1),this.value=c,this.type=e||this.ctor.LINEAR,this.delay=f||0,this.from=g},{run:function(){artjs.Object.isPresent(this.from)&&(this._setEffectStyle("none"),this._setStyle(this.from)),artjs.Timeout.fire(this._onDeferredDelegate,100)},_onDeferred:function(){this._setEffectStyle(this.property),this._setStyle(this.value)},_setStyle:function(a){artjs.Element.setStyle(this.element,this.property,a)},_setEffectStyle:function(a){var b=artjs.Element.transitionStyle(a,this.duration,this.type,this.delay);artjs.Element.extendStyle(this.element,b)}},{LINEAR:"linear",EASE:"ease",EASE_IN:"ease-in",EASE_IN_OUT:"ease-in-out",EASE_OUT:"ease-out",run:function(a,b,c,d,e,f){var g=new this(a,b,c,d,e,f);g.run()}}),artjs.Blind=artjs.transition.Blind=artjs.Class(function(a,b,c,d,e,f){this.super("height",a,b,c,d,e,f)},{_setStyle:function(a){this.super(a+"px"),artjs.Element.setStyle(this.element,"overflow","hidden")}},{toggle:function(a,b,c,d,e){var f=a.style.height=="0px"?b:0;this.run(a,f,c,d,e)}},artjs.TransitionBase),artjs.Fade=artjs.transition.Fade=artjs.Class(function(a,b,c,d,e,f){this.super("opacity",a,b,c,d,e,f)},null,null,artjs.TransitionBase),artjs.BaseMatcher=artjs.spec.matcher.Base=artjs.Class(function(a,b){this.expected=a,this.toText=b||"be"},{resolve:function(a){return a.value===this.expected},_failureData:function(a){var b=[a.value,"expected to",this.toText,String(this.expected)];return a.not&&b.splice(2,0,"not"),b},failureText:function(a){return this._failureData(a).join(" ")}}),artjs.AMatcher=artjs.spec.matcher.A=artjs.Class(function(a){this.super(a)},{resolve:function(a){return typeof a.value===this.expected}},null,artjs.BaseMatcher),artjs.ContainMatcher=artjs.spec.matcher.Contain=artjs.Class(function(a){this.super(a,"contain")},{resolve:function(a){return artjs.Array.contains(a.value,this.expected)}},null,artjs.BaseMatcher),artjs.EqMatcher=artjs.spec.matcher.Eq=artjs.Class(function(a){this.super(a,"equal")},{resolve:function(a){return artjs.Object.isArray(a.value)?artjs.Array.equal([a.value,this.expected]):this.super(a)}},null,artjs.BaseMatcher),artjs.FalseMatcher=artjs.spec.matcher.False=artjs.Class(function(){this.super(!1)},null,null,artjs.BaseMatcher),artjs.NullMatcher=artjs.spec.matcher.Null=artjs.Class(function(){this.super(null)},null,null,artjs.BaseMatcher),artjs.ReceiveMatcher=artjs.spec.matcher.Receive=artjs.Class(function(a){this.super(a,"receive")},{resolve:function(a){return this.receiver=new artjs.SpecReceiver(this,a),this.receiver},_failureData:function(a){var b=this.super(a),c=this.receiver.args();if(c){var d=this.receiver.actualArgs();b.push("with"),b.push(this._argsString(c)),d&&b.push("but was "+this._argsString(d))}return b},_mapArgs:function(a){return"["+a.join(", ")+"]"},_argsString:function(a){return"("+(this.receiver.isInSeries()?artjs.Array.map(a,this._mapArgs,this):a).join(", ")+")"}},null,artjs.BaseMatcher),artjs.TrueMatcher=artjs.spec.matcher.True=artjs.Class(function(){this.super(!0)},null,null,artjs.BaseMatcher),artjs.BaseSpecNode=artjs.spec.node.Base=artjs.Class(function(a,b,c){this.facet=a,this.body=b,this.focus=Boolean(c)},{register:function(){artjs.Spec.updateFocus(this.focus)},execute:function(){this.ctor.execute(this)},toString:function(){return this.facet.toString()}},{_path:[],getPath:function(){return this._path},execute:function(a){this._path.push(a),a.body(),this._cleanTrailingBefores(),this._path.pop()},_cleanTrailingBefores:function(){var a;while((a=artjs.Array.last(this._path))&&a.ctor==artjs.Before)this._path.pop()}}),artjs.AutoExecNode=artjs.spec.node.AutoExec=artjs.Class(null,{register:function(){this.super(),this.execute()}},null,artjs.BaseSpecNode),artjs.Before=artjs.spec.node.Before=artjs.Class(function(a){this.super("before",a,!1)},{register:function(){artjs.Spec.isRealRun()&&this.ctor.getPath().push(this)}},null,artjs.AutoExecNode),artjs.Context=artjs.spec.node.Context=artjs.Class(null,null,null,artjs.AutoExecNode),artjs.Describe=artjs.spec.node.Describe=artjs.Class(null,null,null,artjs.AutoExecNode),artjs.It=artjs.spec.node.It=artjs.Class(function(a,b,c){this.super(a,b,c),this._results=[]},{register:function(){this.super(),this.ctor.instances.push(this)},execute:function(){artjs.Spec.setCurrentTest(this),this._path=this.ctor.getPath().concat(),artjs.Spec.isRealRun()&&(!artjs.Spec.hasFocus()||this.hasFocus())&&(this._receivers=[],this._runBefores(),this.super(),artjs.Array.each(this._receivers,this._testReceiver,this),artjs.Spec.getRunner().testComplete())},pushResult:function(a){this._results.push(a)},isSuccess:function(){return artjs.Array.all(artjs.Array.pluck(this._results,"value"))},failureText:function(){return artjs.Array.detect(this._results,this._isFailedResult).failureText()},pushReceiver:function(a){this._receivers.push(a)},getPath:function(){return this._path},_isFailedResult:function(a){return!a.value},_testReceiver:function(a){var b=a.getResult();this.pushResult(b),a.rollback()},hasFocus:function(){return artjs.Array.any(artjs.Array.pluck(this._path,"focus"))||this.focus},_runBefores:function(){var a=artjs.Array.select(this._path,this.ctor._isBefore);artjs.Array.invoke(a,"execute")}},{instances:[],resetInstances:function(){this.instances=[]},instancesWithFocus:function(){return artjs.Array.select(this.instances,this._hasFocus,this)},_hasFocus:function(a){return a.hasFocus()},_isBefore:function(a){return a.ctor==artjs.Before}},artjs.AutoExecNode),artjs.Specify=artjs.spec.node.Specify=artjs.Class(null,{register:function(){this.super(),this.ctor.instances.push(this)},execute:function(){artjs.Spec.setSubject(this.facet),this.super()}},{instances:[]},artjs.BaseSpecNode),artjs.BaseSpecRunner=artjs.spec.runner.Base=artjs.Class(function(){this._it=undefined},{run:function(){artjs.Array.invoke(artjs.Specify.instances,"execute")},setSubject:function(a){this._subject=a},getSubject:function(){return this._subject},setCurrentTest:function(a){this._it=a},getCurrentTest:function(){return this._it}}),artjs.RealSpecRunner=artjs.spec.runner.Real=artjs.Class(function(){this._duration=undefined,this._timeline=new artjs.Timeline,this._subject=undefined,this.onComplete=new artjs.Event("artjs.SpecRunner::onComplete"),this.onItComplete=new artjs.Event("artjs.SpecRunner::onItComplete")},{run:function(){this._timeline.mark(),this.super(),this._duration=this._timeline.mark(),this.onComplete.fire(this)},getDuration:function(){return this._duration},pushResult:function(a){this._it.pushResult(a)},testComplete:function(){this.onItComplete.fire(this)}},null,artjs.BaseSpecRunner),artjs.DrySpecRunner=artjs.spec.runner.Dry=artjs.Class(null,null,null,artjs.BaseSpecRunner),artjs.BaseSpecView=artjs.spec.view.Base=artjs.Class(null,{beforeRun:function(){},afterDryRun:function(){}}),artjs.BrowserSpecView=artjs.spec.view.Browser=artjs.Class(function(a){this.super(),this._container=a||document.body,this._runnerTemplate=artjs.$C("div",{className:"runner"}),this._testTemplate=artjs.$C("span",{className:"test"}),this._resultsTemplate=artjs.$C("div",{className:"results"})},{beforeRun:function(){this.super(),this._element=artjs.$I(this._container,this._runnerTemplate),this._resultsElement=artjs.$I(this._container,this._resultsTemplate)},onItComplete:function(a){var b=a.getCurrentTest().isSuccess();artjs.Element.setContent(this._testTemplate,b?".":"F"),this._testTemplate.className=b?"success":"failure",artjs.Element.insert(this._element,this._testTemplate)},onComplete:function(a){var b=artjs.It.instances,c=a.getDuration(),d=artjs.Array.reject(b,this._isSuccess),e=artjs.Array.isEmpty(d),f=["results"],g=b.length,h=d.length;f.push(e?"success":"failure"),this._resultsTemplate.className=f.join(" ");var i=e?"Success!":"Failure!",j=e?g+" tests in total.":h+" tests failed of "+g+" total.",k="Duration: "+artjs.Date.miliToHMSM(c),l=artjs.$E("p",{className:"result"},i),m=artjs.$E("p",{className:"stat"},j+"<br/>"+k);artjs.$I(this._resultsElement,l),artjs.$I(this._resultsElement,m);if(!e){var n=artjs.$E("ul");this._getFailureHtml.list=n,artjs.Array.each(d,this._getFailureHtml,this),artjs.$I(this._resultsElement,n)}},_isSuccess:function(a){return a.isSuccess()},_getFailureHtml:function(a){var b=artjs.Array.map(a.getPath(),this._nodeToString).join(" "),c=a.failureText(),d=artjs.$E("p",{className:"path"},b),e=artjs.$E("p",{className:"info"},c),f=artjs.$E("li");artjs.$I(f,d),artjs.$I(f,e),artjs.$I(arguments.callee.list,f)},_nodeToString:function(a){var b=a.facet;return typeof b=="string"?b:b._name}},{run:function(a){var b=new this(a);artjs.Spec.init(b),artjs.Spec.run()}},artjs.BaseSpecView),artjs.Actual=artjs.spec.Actual=artjs.Class(function(a){this.value=a,this.not=!1},{to:function(a){var b=a.resolve(this);return typeof b=="boolean"?artjs.Spec.pushResult(new artjs.SpecResult(this,a,Boolean(this.not^b))):artjs.Spec.pushReceiver(b),b},toNot:function(a){return this.not=!0,this.to(a)}}),artjs.SpecApi=artjs.spec.Api={register:function(a,b,c,d){var e=new a(b,c,d);return e.register(),e}},artjs.Mock=artjs.spec.Mock=artjs.Class(function(a){artjs.Array.each(a,this.extend,this)},{extend:function(a){this[a]=function(){}},toString:function(){return this.ctor.toString()}},{_name:"Mock",toString:function(){return this._name}}),artjs.SpecReceiver=artjs.spec.Receiver=artjs.Class(function(a,b){this._matcher=a,this._actual=b;var c=this._actual.value,d=this._matcher.expected,e=artjs.$DC(this,"resolve");this._isForMock()||(this._original=artjs.$D(c,d)),c[d]=e,this._successCounter=0,this._callCounter=0,this._times=null,this._args=null,this._callOriginal=null,this._inSeries=null},{resolve:function(){var a=artjs.$A(arguments),b;this._callOriginal?(this._original.args=a,b=this._original.invoke()):b=this._returnValue;if(this._args==null)this._successCounter++;else{var c=this._inSeries?this._args[this._callCounter]:this._args;artjs.Array.equal([a,c])&&this._successCounter++}return this._inSeries?(this._actualArgs||(this._actualArgs=[]),this._actualArgs.push(a)):this._actualArgs=a,this._callCounter++,b},inSeries:function(){return this._inSeries=!0,this},withArgs:function(){return this._args=artjs.$A(arguments),this},andReturn:function(a){return this._returnValue=a,this},andCallOriginal:function(){var a=this._isForMock();return a&&artjs.log('WARNING: Using "andCallOriginal" for mock has no result.'),this._callOriginal=!a,this},once:function(){return this.times(1),this},twice:function(){return this.times(2),this},times:function(a){return this._times=a,this},args:function(){return this._args},actualArgs:function(){return this._actualArgs},isInSeries:function(){return this._inSeries},getResult:function(){var a=this._inSeries?this._args.length:this._times,b=this._successCounter,c=a==null?b>0:b==a;return new artjs.SpecResult(this._actual,this._matcher,Boolean(this._actual.not^c))},rollback:function(){this._isForMock()||(this._actual.value[this._matcher.expected]=this._original.method)},_isForMock:function(){return this._actual.value instanceof artjs.Mock}}),artjs.SpecResult=artjs.spec.Result=artjs.Class(function(a,b,c){this.actual=a,this.matcher=b,this.value=c},{failureText:function(){return this.matcher.failureText(this.actual)}}),artjs.Spec=artjs.spec.Spec={init:function(a){this._dryRunner=new artjs.DrySpecRunner,this._realRunner=new artjs.RealSpecRunner,this._realRunner.onComplete.add(artjs.$D(a,"onComplete")),this._realRunner.onItComplete.add(artjs.$D(a,"onItComplete")),this._view=a},run:function(){this._view.beforeRun(),this._runner=this._dryRunner,this._runner.run(),this._view.afterDryRun(),artjs.It.resetInstances(),this._runner=this._realRunner,this._runner.run()},getRunner:function(){return this._runner},isRealRun:function(){return this.getRunner()==this._realRunner},updateFocus:function(a){this._hasFocus=this._hasFocus||a},hasFocus:function(){return this._hasFocus},getSubject:function(){return this.getRunner().getSubject()},pushResult:function(a){this.getRunner().pushResult(a)},pushReceiver:function(a){return this.getRunner().getCurrentTest().pushReceiver(a)},setSubject:function(a){this.getRunner().setSubject(a)},setCurrentTest:function(a){this.getRunner().setCurrentTest(a)}},artjs.TemplateBase=artjs.template.Base={render:function(a,b){return artjs.TemplateCompiler.compile(a,b)},renderInto:function(a,b,c){b=this.render(b,c),artjs.Element.setContent(a,b),this.evalScripts(a),artjs.ComponentScanner.scan(a)},renderOnto:function(a,b,c){b=this.render(b,c),a=artjs.Element.replace(artjs.ElementBuilder.parse(b),a),artjs.Element.toTagString(a)=="script"?this.evalScript(a):this.evalScripts(a),artjs.ComponentScanner.scan(a)},renderElement:function(a,b){this.renderInto(a,a.innerHTML,b)},renderTemplateInto:function(a,b,c){var d=artjs.TemplateLibrary.getTemplate(b);this.renderInto(a,d,c)},evalScripts:function(a){artjs.Array.each(artjs.Selector.findAll(a,"script"),this.evalScript,this)},evalScript:function(script){eval(artjs.Element.getContent(script))}},artjs.TemplateCompiler=artjs.template.Compiler=artjs.Class(function(a,b){this._tagRegEx=/\{\{[^{}]+\}\}/g,this._methodRegEx=/^(\w+)\((.*)\)$/,this._content=a,this._scope=b},{compile:function(){var a=this._content.match(this._tagRegEx);return artjs.Array.each(a,this._eachTag,this),this._content},_eachTag:function(a){var b=artjs.String.sub(a,2,-2),c=this._parseExpression(b);this._content=this._content.replace(a,c)},_parseExpression:function(a){this._methodRegEx.lastIndex=0;var b=this._methodRegEx.exec(a);return b?this._parseMethod(b):this._fromScope(a)},_parseMethod:function(a){a.shift();var b=a.shift(),c=artjs.Array.first(a),d=artjs.Array.map(c.split(","),this._stripArg,this),e=artjs.Array.map(d,this._parseArg,this),f=artjs.TemplateHelpers;return f[b].apply(f,e.concat(this._scope))},_parseArg:function(a){var b=a;return b=artjs.String.trim(b,"'"),b=artjs.String.trim(b,'"'),b==a?this._parseExpression(a):b},_fromScope:function(a){return artjs.String.toS(this._scope[a])},_stripArg:function(a){return artjs.String.strip(a)}},{_name:"Compiler",compile:function(a,b){var c=new this(a,b);return c.compile()},toString:function(){return this._name}}),artjs.TemplateHelpers=artjs.template.Helpers={render:function(a,b){var c=artjs.TemplateLibrary.getTemplate(a);return artjs.TemplateBase.render(c,b)},renderInto:function(a,b,c){artjs.TemplateBase.renderTemplateInto(a,b,c)},renderCollection:function(a,b){var c=artjs.$DC(this,this._renderCollectionItem,!1,a);return this._map(b,c)},renderIf:function(a,b){return a?this[b](a):""},renderSelect:function(a,b){return this._selectedOption=b,this.renderElement("select",a,this.renderOptions(a))},renderOptions:function(a){return this._map(a,this._renderOption)},renderTable:function(a){var b=a.head?this.renderElement("thead",null,this._map(a.head||[],this._renderTableHead)):"",c=a.foot?this.renderElement("tfoot",null,this._map(a.foot,this._renderTableFoot)):"",d=a.body?this.renderElement("tbody",null,this._map(a.body||[],this._renderTableRow)):"";return this.renderElement("table",null,b+c+d)},renderElement:function(a,b,c){return artjs.$B(a,b,c).toString()},registerAll:function(a){artjs.Object.eachPair(a,this.register,this)},register:function(a,b){this[a]=b},renderChecked:function(a){return a?"checked":artjs.String.blank()},pluralize:function(a,b){return artjs.String.pluralize(a,b)},_map:function(a,b){return artjs.Array.map(a,b,this).join("")},_renderOption:function(a){var b={value:a.value};return a.value==this._selectedOption&&(b.selected="selected"),this.renderElement("option",b,a.text)},_renderTableHead:function(a){return this._renderTableCell("th",a)},_renderTableFoot:function(a){return this._renderTableElement(a)},_renderTableRow:function(a){return this.renderElement("tr",null,this._map(a,this._renderTableElement))},_renderTableElement:function(a){return this._renderTableCell("td",a)},_renderTableCell:function(a,b){return this.renderElement(a,null,b)},_renderCollectionItem:function(a,b,c,d){return a._index=b,this.render(d,a)}},artjs.TemplateLibrary=artjs.template.Library={config:{PATH:"/templates",BASE_TEMPLATES:["artjs/calendar"],TEMPLATES:[]},_templates:{},getTemplate:function(a){return this._templates[a]},loadTemplate:function(a){artjs.TemplateBase.renderElement(artjs.Element.insert(this._templatesContainer,artjs.$E("div",null,this.getTemplate(a))))},init:function(){this._onLoadSuccessDelegate=artjs.$D(this,"_onLoadSuccess"),this._templatesToLoad=this.config.BASE_TEMPLATES.concat(this.config.TEMPLATES),artjs.Array.each(this._templatesToLoad,this._load,this),this._loadCheck()},_load:function(a){var b=artjs.$get(this.config.PATH+"/"+a+".html",null,this._onLoadSuccessDelegate);b.id=a},_onLoadSuccess:function(a){this._templates[a.id]=a.getResponseText(),this._loadCheck()},_loadCheck:function(){artjs.Object.keys(this._templates).length==this._templatesToLoad.length&&this._onAllLoaded()},_onAllLoaded:function(){var a=document.body;artjs.ComponentScanner.scan(a),this._templatesContainer=artjs.Element.insert(a,artjs.$E("div",{id:"artjs-Templates"})),artjs.onLibraryLoad.fire(this)}},artjs.Component=artjs.component.Base=artjs.Class(function(a){this._element=a,this._handlers=[]},{getElement:function(){return this._element},_fire:function(a){artjs.Broadcaster.fire(a,this)},_handle:function(a,b){this._handleEvent(a,b)},_handleEmit:function(a,b){return this._handleEvent(a,b,artjs.ComponentEventHandler.UP)},_handleBroadcast:function(a,b){return this._handleEvent(a,b,artjs.ComponentEventHandler.DOWN)},_handleEvent:function(a,b,c){var d=new artjs.ComponentEventHandler(this,a,artjs.$D(this,b),c);return this._handlers.push(d),d},_register:function(a){artjs.Object.eachPair(a,this._registerEach,this)},_registerEach:function(a,b){this.ctor.onLoad(a,artjs.$D(this,b))},_destroy:function(){artjs.Array.invoke(this._handlers,"_destroy"),delete this._handlers}},{_name:"Component",_idToComponent:{},instances:[],register:function(a,b){this._idToComponent[a]=b},find:function(a){return this._idToComponent[a]},onLoad:function(a,b){var c=this.find(a);c?b.invoke(c):artjs.ComponentScanner.addListener(a,b)},toString:function(){return this._name}}),artjs.Button=artjs.component.Button=artjs.Class(function(a){this.super(a),this._eventId=artjs.Element.getDataValue(this._element,"event"),this.onClick=new artjs.Event("artjs.Button::onClick"),artjs.on("click",this._element,artjs.$D(this,"_onClick"))},{_onClick:function(a){this.onClick.fire(a),this._eventId&&this._fire(this._eventId)}},{_name:"artjs.Button"},artjs.Component),artjs.Calendar=artjs.ui.Calendar=artjs.Class(function(a){this.super(a),this._hide(),this._register({"artjs-Calendar-years":"_onYearsSelectLoaded","artjs-Calendar-months":"_onMonthsSelectLoaded","artjs-Calendar-days":"_onDaysTableLoaded","artjs-Calendar-prev":"_onPrevLoaded","artjs-Calendar-next":"_onNextLoaded"}),this._onEachDayDelegate=artjs.$D(this,"_onEachDay"),this._onItemDelegate=artjs.$D(this,"_onItem"),this._onPrevMonthDelegate=artjs.$D(this,"_onPrevMonth"),this._onNextMonthDelegate=artjs.$D(this,"_onNextMonth"),this._onMonthSelectDelegate=artjs.$D(this,"_onMonthSelect"),this._onYearSelectDelegate=artjs.$D(this,"_onYearSelect")},{setSource:function(a){var b=artjs.Element.getBounds(a.getElement()).getRightTop(),c=b.add(new artjs.Point(2,0));this._source=a,this._setPosition(c),this._toggle()},_onYearsSelectLoaded:function(a){this._years=a,this._years.onChange.add(this._onYearSelectDelegate)},_onMonthsSelectLoaded:function(a){this._months=a,this._months.onChange.add(this._onMonthSelectDelegate),this._months.setOptions(artjs.Array.map(artjs.Lang.t("datepicker","months"),this.ctor._toMonthOption))},_onDaysTableLoaded:function(a){this._days=a,this._days.setData({head:this._getDaysRow(),body:artjs.Array.build(this.ctor.ROWS_NUM,this._getDaysRow)}),this._days.onItem.add(this._onItemDelegate)},_onPrevLoaded:function(a){a.onClick.add(this._onPrevMonthDelegate)},_onNextLoaded:function(a){a.onClick.add(this._onNextMonthDelegate)},_getDaysRow:function(){return artjs.Array.build(7,artjs.String.blank)},_toggle:function(){this._isHidden()?this._show():this._hide()},_show:function(){var a=this._source.getModel().value;this._selectedDate=artjs.String.isEmpty(a)?new Date:artjs.Date.fromYMD(a,this.ctor.SEPARATOR),this._currentDate=new Date(this._selectedDate),this._firstDay=this._source.firstDay,this._years.setOptions(artjs.Array.map(artjs.Array.fromRange(this._source.yearsRange),this.ctor._toYearOption)),this._update(),artjs.Element.show(this._element)},_update:function(){var a=artjs.Date.firstDate(this._currentDate),b=a.getDay(),c=artjs.Date.monthDaysNum(this._currentDate);this._months.setValue(this._currentDate.getMonth()+1),this._years.setValue(this._currentDate.getFullYear()),this.startIndex=artjs.Math.sawtooth(b-this._firstDay,0,7);var d=artjs.Math.stairs(this.startIndex+c-1,0,7)+1;for(var e=0;e<this.ctor.ROWS_NUM;e++)this._days.setRowVisible(e,e<d);this._days.updateHead(artjs.Array.build(7,this._eachHeadData,this)),this._days.iterate(this._onEachDayDelegate)},_eachHeadData:function(a){var b=artjs.Math.sawtooth(this._firstDay+a,0,7);return artjs.Lang.t("datepicker","days")[b]},_onEachDay:function(a,b){var c=new Date(this._currentDate);c.setDate(b-this.startIndex+1);var d=c.getDate(),e=c.getMonth()==this._currentDate.getMonth(),f=artjs.Array.includes(this.ctor.WEEKEND_DAYS,(b+this._firstDay)%7),g=c.getTime()==this._selectedDate.getTime();artjs.Element.setClasses(a,{weekend:f,selected:g,invalid:!e}),artjs.Element.setContent(a,d)},_onItem:function(a){var b=artjs.Element.getContent(a),c=!artjs.Element.hasClass(a,"invalid");return c&&(this._selectedDate.setFullYear(this._currentDate.getFullYear()),this._selectedDate.setMonth(this._currentDate.getMonth()),this._selectedDate.setDate(parseInt(b,10)),this._update(),this._source.getModel().value=artjs.Date.toYMD(this._selectedDate,this.ctor.SEPARATOR),this._hide()),!1},_onPrevMonth:function(a){a.preventDefault(),this._onMonth(-1)},_onNextMonth:function(a){a.preventDefault(),this._onMonth(1)},_onMonth:function(a){this._currentDate.setMonth(this._currentDate.getMonth()+a),this._update()},_onMonthSelect:function(a){this._currentDate.setMonth(parseInt(a.getValue(),10)-1),this._update()},_onYearSelect:function(a){this._currentDate.setFullYear(parseInt(a.getValue(),10)),this._update()},_setYearSpan:function(a){this.yearSpan=a,this.years=artjs.Array.build(this.yearSpan.y-this.yearSpan.x+1,this._buildYearSpan)},_buildYearSpan:function(a){return this.yearSpan.x+a},_setPosition:function(a){artjs.Element.setPosition(this._element,a)},_hide:function(){artjs.Element.hide(this._element)},_isHidden:function(){return artjs.Element.isHidden(this._element)}},{WEEKEND_DAYS:[6,0],ROWS_NUM:7,SEPARATOR:"-",_name:"artjs.Calendar",init:function(){artjs.onLibraryLoad.add(artjs.$D(this,"_onLibraryLoad"))},_toMonthOption:function(a,b){return{value:b+1,text:a}},_toYearOption:function(a,b){return{value:a,text:a}},_onLibraryLoad:function(){artjs.TemplateLibrary.loadTemplate("artjs/calendar")}},artjs.Component),artjs.CheckBox=artjs.component.CheckBox=artjs.Class(function(a){this.super(a),this._eventId=artjs.Element.getDataValue(this._element,"event"),this.onClick=new artjs.Event("artjs.CheckBox::onClick"),artjs.on("click",this._element,artjs.$D(this,"_onClick"))},{isChecked:function(){return this._element.checked},setChecked:function(a){this._element.checked=a},setValue:function(a){this._element.value=a},getValue:function(){return this._element.value},_onClick:function(a){this.onClick.fire(a),this._eventId&&this._fire(this._eventId)}},{_name:"artjs.CheckBox"},artjs.Component),artjs.Link=artjs.component.Link=artjs.Class(function(a){this.super(a),this.onClick=new artjs.Event("artjs.Link::onClick"),artjs.on("click",this._element,artjs.$D(this,"_onClick"))},{getHref:function(){return artjs.Element.getAttributes(this._element).href},_onClick:function(a){this.onClick.fire(a),artjs.Router.navigateTo(this.getHref())}},{_name:"artjs.Link"},artjs.Component),artjs.Select=artjs.component.Select=artjs.Class(function(a){this.super(a),this.onChange=new artjs.Event("artjs.Select::onChange"),artjs.on("change",this._element,artjs.$D(this,"_onChange"))},{setOptions:function(a){this._options=a,this._update()},setValue:function(a){this._element.value=a},getValue:function(){return this._element.value},_update:function(){artjs.Element.setContent(this._element,artjs.TemplateHelpers.renderOptions(this._options))},_onChange:function(a){this.onChange.fire(this)}},{_name:"artjs.Select"},artjs.Component),artjs.Table=artjs.component.Table=artjs.Class(function(a){this.super(a),this.onItem=new artjs.Event("artjs.Table::onItem"),artjs.on("click",this._element,artjs.$D(this,"_onItem"),"td")},{setData:function(a){this._data=a,this._update()},updateHead:function(a){artjs.Array.each(a,this._updateHead,this)},iterate:function(a){artjs.Array.each(this._items,a.method,a.object)},setRowVisible:function(a,b){artjs.Element.setVisible(this._rows[a],b)},_updateHead:function(a,b){artjs.Element.setContent(this._headCells[b],a)},_update:function(){artjs.Element.setContent(this._element,artjs.TemplateHelpers.renderTable(this._data));var a=artjs.$find(this._element,"thead"),b=artjs.$find(this._element,"tbody");this._headCells=artjs.$findAll(a,"th"),this._rows=artjs.$findAll(b,"tr"),this._items=artjs.$findAll(b,"td")},_onItem:function(a){this.onItem.fire(a.target)}},{_name:"artjs.Table"},artjs.Component),artjs.Text=artjs.component.Text=artjs.Class(function(a){this.super(a),this.onChange=new artjs.Event("artjs.Text::onChange"),artjs.on("change",this._element,artjs.$D(this,"_onChange"))},{setValue:function(a){this._element.value=a},getValue:function(){return this._element.value},clear:function(){this.setValue(artjs.String.blank())},_onChange:function(a){this.onChange.fire(this)}},{_name:"artjs.Text"},artjs.Component),artjs.Tree=artjs.component.Tree=artjs.Class(function(a){this.super(a),this._leafClassToggler=new artjs.ClassToggler("selected"),this.onLeaf=new artjs.Event("artjs.Tree::onLeaf"),artjs.on("click",this._element,artjs.$D(this,"_onElement"),"li a")},{setData:function(a){var b=artjs.$P(this._renderNode(a));artjs.Element.insert(this.getElement(),b),artjs.Array.each(artjs.Selector.findAll(this.getElement(),"li"),this._eachElement,this)},clickAt:function(){this._openingNode=this.getElement(),artjs.Array.each(artjs.$A(arguments),this._openAt,this)},getCurrent:function(){return this._current},_openAt:function(a){this._openingNode=artjs.Element.elementAt(artjs.Selector.find(this._openingNode,"ul"),a),this._handleClick(artjs.Element.firstElement(this._openingNode))},_renderNode:function(a){return artjs.$B("ul",null,artjs.Object.map(a,this._mapNode,this).join("")).toString()},_mapNode:function(a,b){var c=typeof b=="string",d=c?b:"#",e=artjs.$B("a",{href:d},a).toString()+(c?"":this._renderNode(b));return artjs.$B("li",null,e).toString()},_eachElement:function(a){var b=artjs.Element.firstElement(a);this._isNode(b)?artjs.Element.hide(artjs.$find(a,"ul")):artjs.Element.addClass(a,"leaf")},_onElement:function(a){a.preventDefault(),this._handleClick(a.target)},_handleClick:function(a){this._current=a,this._isNode(this._current)?this._toggleNode():this._leafAction()},_isNode:function(a){var b=artjs.Element.parent(a);return artjs.Array.isNotEmpty(artjs.Selector.findAll(b,"ul"))},_toggleNode:function(){var a=artjs.Element.next(this._current);artjs.Element.toggle(a),artjs.Element.setClass(artjs.$parent(this._current),"expanded",!artjs.Element.isHidden(a))},_leafAction:function(){this._leafClassToggler.toggle(artjs.Element.parent(this._current)),this.onLeaf.fire(this)}},{_name:"artjs.Tree"},artjs.Component),artjs.component.utils.EventHandler=artjs.ComponentEventHandler=artjs.Class(function(a,b,c,d){this._component=a,this._eventId=b,this._delegate=c,this._type=d,this._onEventDelegate=artjs.$D(this,"_onEvent"),artjs.Broadcaster.addListener(this._eventId,this._onEventDelegate)},{_destroy:function(){artjs.Broadcaster.removeListener(this._eventId,this._onEventDelegate)},_onEvent:function(a){var b=a.getElement(),c=this._component.getElement(),d;switch(this._type){case this.ctor.DOWN:d=artjs.Selector.isDescendantOf(c,b);break;case this.ctor.UP:d=artjs.Selector.isDescendantOf(b,c);break;default:d=!0}d&&this._delegate.invoke(a)}},{UP:"UP",DOWN:"DOWN"}),artjs.component.utils.Scanner=artjs.ComponentScanner={_channel:new artjs.Channel("ComponentScanner"),scan:function(a){artjs.Array.each(artjs.$findAll(a,".art"),this._onFound,this)},addListener:function(a,b){this._channel.addListener(a,b)},_onFound:function(a){this.initElement(a)},initElement:function(a){this._element=a;var b=artjs.Element.getClasses(a);artjs.Array.removeItem(b,"art"),artjs.Array.each(b,this._eachClassName,this)},_eachClassName:function(a){this.instantiateClass(a,this._element)},instantiateClass:function(a,b){var c=a.split("-"),d=artjs.Array.inject(c,window,this._injectPathChunk),e=null;if(d instanceof Function){e=new d(b),artjs.Component.instances.push(e);var f=artjs.Element.getAttributes(e.getElement()).id;f&&(artjs.Component.register(f,e),this._channel.fire(f,e))}return e},_injectPathChunk:function(a,b){return a&&a[b]}},artjs.component.utils.Sweeper=artjs.ComponentSweeper={INTERVAL:1e3,init:function(){var a=artjs.$D(this,"_onSweep"),b=new artjs.Clock(this.INTERVAL);b.onChange.add(a),b.start(),artjs.$T(a,100)},_onSweep:function(){var a=artjs.Array.partition(artjs.Component.instances,this._isOnStage,this);artjs.Array.invoke(a.y,"_destroy"),artjs.Component.instances=a.x},_isOnStage:function(a){return artjs.Selector.isOnStage(a.getElement())}},artjs.ElementInspector=artjs.ui.ElementInspector=artjs.Class(function(){artjs.on("mousemove",document,artjs.$D(this,"_onMouseMove")),this._toggler=new artjs.Toggler(!0),this._toggler.onActivate.add(artjs.$D(this,"_onActivate")),this._toggler.onDeactivate.add(artjs.$D(this,"_onDeactivate"))},{_onMouseMove:function(a,b){var c=b.getTargets(a),d=c.origin;artjs.Array.any(artjs.Element.children(d),artjs.Element.isText)&&this._toggler.toggle(d)},_onActivate:function(a){var b=a.current;b&&artjs.Element.addClass(b,"inspected")},_onDeactivate:function(a){var b=a.current;b&&artjs.Element.removeClass(b,"inspected")}}),artjs.View=artjs.view.Base=artjs.Class(function(a){this.super(a),this._onModelChangeDelegate=artjs.$D(this,"_onModelChange")},{getModel:function(){return this._model},setModel:function(a){this._model=a,this._model.onChange.add(this._onModelChangeDelegate),this._render()},_onModelChange:function(){this._render()},_render:function(){},_destroy:function(){this.super(),this._model.onChange.remove(this._onModelChangeDelegate),this._cleanupChannel(this._model.getChannel()),this._cleanupChannel(artjs.Broadcaster)},_cleanupChannel:function(a){var b=artjs.Object.values(a.getEvents()),c=artjs.Array.invoke(b,"getItems");artjs.Array.each(c,this._filterListeners,this)},_filterListeners:function(a){artjs.Array.$reject(a,this._filterListener,this)},_filterListener:function(a){return a.object==this}},{_name:"artjs.View"},artjs.Component),artjs.Input=artjs.view.Input=artjs.Class(function(a){this.super(a);var b=new artjs.Model;b.addProperty("value",a.value),b.addPropertyListener("value",artjs.$D(this,"_onModelValueChange")),this.setModel(b),artjs.on("change",a,artjs.$D(this,"_onUiValueChange"))},{setReadOnly:function(a){a?this._element.setAttribute("readonly","readonly"):this._element.removeAttribute("readonly")},_onModelValueChange:function(a){this._element.value=a.newValue},_onUiValueChange:function(a){this._model.setProperty(a.currentTarget.value)}},{_name:"artjs.Input"},artjs.View),artjs.ListView=artjs.view.List=artjs.Class(function(a){this.super(a),this.setModel(new artjs.ListModel);var b=artjs.Element.getData(a);this._itemTemplate=b.template,this._itemClass=b["item-class"]},{addItem:function(a){var b=this._model.addItem(a);return this._renderItem(a,b-1),b},removeItem:function(a){var b=artjs.Array.first(this._model.removeItem(a));return artjs.Element.removeAt(this._element,b),b},removeItems:function(a){return artjs.Array.map(a,this.removeItem,this)},setItems:function(a){this._model.items=a},_render:function(){artjs.Element.clear(this._element),artjs.Array.each(this._model.items,this._renderItem,this)},_renderItem:function(a){var b=artjs.$E("li",{"data-template":this._itemTemplate});b=artjs.Element.insert(this._element,b),artjs.ComponentScanner.instantiateClass(this._itemClass,b).setModel(a)}},{_name:"artjs.ListView"},artjs.View),artjs.DatePicker=artjs.view.DatePicker=artjs.Class(function(a){this.super(a);var b=new Date,c=b.getFullYear(),d=b.getMonth(),e=artjs.Element.getData(this._element),f=parseInt(e["first-day"]);this.year=c,this.month=d,this.yearsRange=new artjs.Point(parseInt(e["year-from"])||c-20,parseInt(e["year-to"])||c+5),this.firstDay=isNaN(f)?1:f,this.setReadOnly(!0),artjs.on("click",this._element,artjs.$D(this,"_onClick")),this.calendar=artjs.Component.onLoad("artjs-Calendar",artjs.$D(this,"_onCalendarLoad"))},{_onCalendarLoad:function(a){this.calendar=a},_onClick:function(a){a.preventDefault(),this.calendar.setSource(this)}},{_name:"artjs.DatePicker"},artjs.Input),artjs.TemplateView=artjs.view.Template=artjs.Class(function(a,b){var c=artjs.String.toBoolean(artjs.Element.getDataValue(a,"replace"));this._renderMethod=c?"renderOnto":"renderInto";var d=artjs.Element.getDataValue(a,"template");this._template=d?artjs.TemplateLibrary.getTemplate(d):artjs.Element.getContent(a),this.super(a,b)},{_render:function(){artjs.TemplateBase[this._renderMethod](this._element,this._template,this._model)}},{_name:"artjs.TemplateView"},artjs.View),artjs.$get=artjs.Delegate.callback(artjs.Ajax,"get"),artjs.$post=artjs.Delegate.callback(artjs.Ajax,"post"),artjs.$put=artjs.Delegate.callback(artjs.Ajax,"put"),artjs.$del=artjs.Delegate.callback(artjs.Ajax,"del"),artjs.$A=artjs.Delegate.callback(artjs.Array,"arrify"),artjs.$DC=artjs.Delegate.callback(artjs.Delegate,"callback"),artjs.$F=artjs.Delegate.callback(artjs.Delegate,"func"),artjs.$D=artjs.Delegate.callback(artjs.Delegate,"create"),artjs.$BA=artjs.Delegate.callback(artjs.Delegate,"bindAll"),artjs.$DT=artjs.Delegate.callback(artjs.Delegate,"delegateTo"),artjs.$I=artjs.Delegate.callback(artjs.Element,"insert"),artjs.$B=artjs.Delegate.callback(artjs.ElementBuilder,"build"),artjs.$C=artjs.Delegate.callback(artjs.ElementBuilder,"create"),artjs.$E=artjs.Delegate.callback(artjs.ElementBuilder,"getElement"),artjs.$P=artjs.Delegate.callback(artjs.ElementBuilder,"parse"),artjs.$=artjs.Delegate.callback(artjs.Selector,"getElements"),artjs.$find=artjs.Delegate.callback(artjs.Selector,"find"),artjs.$findAll=artjs.Delegate.callback(artjs.Selector,"findAll"),artjs.$parent=artjs.Delegate.callback(artjs.Selector,"parent"),artjs.$T=artjs.Delegate.callback(artjs.Timeout,"fire"),artjs.Array.contains=artjs.Array.includes,artjs.Array.containsAll=artjs.Array.includesAll,artjs.Broadcaster=artjs.events.Broadcaster=new artjs.Channel("Broadcaster"),artjs.onDocumentLoad=new artjs.Event("document:load"),artjs.onWindowLoad=new artjs.Event("window:load"),artjs.onLibraryLoad=new artjs.Event("library:load"),document.addEventListener("DOMContentLoaded",function(){artjs.onDocumentLoad.fire(),artjs.TemplateLibrary.init(),artjs.ComponentSweeper.init(),artjs.Calendar.init()},!1),window.addEventListener("load",function(){artjs.onWindowLoad.fire()},!1),artjs.onLibraryLoad.add(artjs.$F(function(){artjs.Router.init()}))