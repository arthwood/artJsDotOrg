var Main=function(){ArtJs.globalize(),ArtJs.doInjection(),this.onNodeDC=this.onNode.bind(this,!0),this.onLeafDC=this.onLeaf.bind(this,!0),this.onContentSuccessD=$D(this,this.onContentSuccess),this.onAnchorDC=this.onAnchor.bind(this),this.currentLeaf=null;var a=$(".sidebar li").partition(function(a,b){return a.find("ul").isEmpty()});a.x.each(this.eachLeaf.bind(this)),a.y.each(this.eachNode.bind(this)),this.content=$(".content").first(),this.expandNode(a.y.first().firstElement()),this.loadSection(a.x.first().firstElement())};Main.FOLDED="url(../images/plus.png)",Main.UNFOLDED="url(../images/minus.png)",Main.LEAF="url(../images/leaf.png)",Main.prototype={eachNode:function(a){a.firstElement().onclick=this.onNodeDC,a.style.listStyleImage=Main.FOLDED},onNode:function(a,b){b.preventDefault(),this.expandNode(a)},expandNode:function(a){var b=a.next();b.toggle(),a.parent().style.listStyleImage=b.isHidden()?Main.FOLDED:Main.UNFOLDED},eachLeaf:function(a){a.firstElement().onclick=this.onLeafDC,a.style.listStyleImage=Main.LEAF},onLeaf:function(a,b){b.preventDefault(),this.loadSection(a)},loadSection:function(a){this.load("com/arthwood/"+a.getAttributes().href),this.currentLeaf&&this.currentLeaf.removeClass("selected"),this.currentLeaf=a,this.currentLeaf.addClass("selected")},load:function(a){$get(a,null,this.onContentSuccessD)},onContentSuccess:function(a){var b=a.getResponseText();this.content.setContent(b);var c=this.content.lastElement();c&&(c.style.marginBottom="0"),this.initializeLinks()},initializeLinks:function(){var a=this.content.find("ul.members");a.isEmpty()||a.each(this.eachMember,this)},eachMember:function(a){var b=a.find("li"),c=b.last();c.style.borderBottom="none",b.each(this.initAnchors,this)},initAnchors:function(a){var b=a.first("h4 a");b.onclick=this.onAnchorDC;var c=a.first(".more");c&&c.blindTo(0,0)},onAnchor:function(a){a.preventDefault();var b=a.currentTarget,c=b.parent().parent().first(".more");c&&c.blindToggle(c.firstElement().getSize().y)}},window.onload=function(){this.main=new Main}